<style>
.ui-select-dropdown{
	min-width:300px;
}
</style>
<form name="editForm" role="form" novalidate>	
	
	<!-- main container -->
	<div class="main-container clearfix">
		<div class="page-wrapper">
			
			<div class="page-content page--current">
				<div class="content-header">
					<div class="clearfix">
						<a class="sidebar-toggle pull-left showLeftPush" data-toggle="push-menu" role="button">
					        <span class="sr-only">Toggle navigation</span>
					        <span class="icon-bar"></span>
					        <span class="icon-bar"></span>
					        <span class="icon-bar"></span>
				      	</a>
					</div>	
				</div>
				
				<div class="panel panel-detail">
					<div class="panel-body">
						<button class="btn btn-default small btn-back back js-back" data-id="0"><i class="fa fa-arrow-left"></i> Back</button>

						<!-- details -->
						<div class="clearfix">
							<div class="pull-left w50 two-column">
								<div class="box-detail">
									<div class="box-header">
										Details
									</div>
									<div class="box-body">
										<div class="clearfix">
											<div class="pull-left w50 two-column">
												<div class="form-group">
													<label for="field_wpid">WO ID</label>
													<input type="text" name="wpid" id="field_wpid" class="form-control" disabled ng-model="vm.workPackage.wpid"/>
												</div>
												<div class="form-group">
													<label for="field_businessArea">Business Area</label>
													<input ng-style="editForm.businessArea.$error.required && vm.errorStyle" ng-required="vm.checkRequiredField('businessArea')" 
		                    								autocomplete="off" type="text" name="businessArea" ng-model="vm.workPackage.businessArea" class="form-control" value="JKT"
			            									uib-typeahead="o as o.name for o in vm.businessAreas | filter:{name:$viewValue} | limitTo:5">
												</div>
												<div class="form-group">
													<label for="field_priority">Priority</label>
													<select class="form-control" name="priorityData" ng-model="vm.workPackage.priority" id="field_priority" ng-disabled="vm.isFieldDisable('priority')">
														<option value="">Select Priority</option>
										                <option value="LOW" data-translate="fmpApp.Priority.LOW">Low</option>
										                <option value="URGENT" data-translate="fmpApp.Priority.URGENT">Urgent</option>
										                <option value="TOP_URGENT" data-translate="fmpApp.Priority.TOP_URGENT">Top Urgent</option>
				            						</select>
												</div>
												<div class="form-group">
													<label for="field_status">Status</label>
													<select class="form-control" name="status" ng-model="vm.workPackage.status" id="field_status"  ng-disabled="true">
														 <option value="">Select Status</option>
										                <option value="COMPLETED">Completed</option>
										                <option value="NEW">New</option>
										                <option value="REVIEWING" >Reviewing</option>
										                <option value="READY_TO_RELEASE">ReadyToRelease</option>
										                <option value="PENDING">Pending</option>
										                <option value="MARKET_DISTRIBUTED">Market Distributed</option>
													</select>
												</div>
												<div class="form-group">
													<label for="field_reviewLevel">Review Level</label>
													<input autocomplete="off" type="text" name="review_level" ng-model="vm.workPackage.reviewLevel" class="form-control" disabled>
												</div>
												<div class="form-group">
													<label for="field_distributionType">Distribution Type</label>
													<input type="text" name="distributionType" class="form-control" disabled ng-model="vm.workPackage.targetDistribution">
												</div>
											</div>
											<div class="pull-left w50 two-column">
												<div class="form-group">
													<label for="field_name">WO Name</label>
													<input type="text" name="wo name" class="form-control"name="name" id="field_name" ng-style="editForm.name.$error.required && vm.errorStyle"
			                    						ng-model="vm.workPackage.name" 
		                    							ng-required="vm.checkRequiredField('workpackageName')" 
			                    						ng-disabled="vm.isFieldDisable('name')"/>
												</div>
												<div class="form-group">
													<label for="field_createdBy">Created By</label>
													<input type="text" class="form-control" name="createdBy" id="field_createdBy" ng-disabled="true"
			                    						ng-model="vm.workPackage.createdBy"/>
												</div>
												<div class="form-group">
													<label for="field_createdDate">Created Date</label>
													<div class="input-group">
														<input id="field_createdDate" type="text" ng-disabled="true" name="createdDate" class="form-control" datetime-picker="{{dateformat}}" ng-model="vm.workPackage.createdDate" is-open="vm.datePickerOpenStatus.createdDate">
														<span class="input-group-addon disabled">
															<i ng-disabled="true" ng-click="vm.openCalendar('createdDate')" class="fa fa-calendar"></i>
														</span>
													</div>
												</div>
												<div class="form-group">
													<label for="field_fillingDate">Filling Date</label>
													<div class="input-group">
														<input type="text" id="field_fillingDate" name="filingDate" class="form-control"
														ng-style="editForm.filingDate.$error.required && vm.errorStyle" ng-required="vm.checkRequiredField('filingDate')" 
														datetime-picker="{{dateformat}}" ng-model="vm.workPackage.filingDate" is-open="vm.datePickerOpenStatus.filingDate"  ng-disabled="vm.isFieldDisable('filingDate')"/>
														<span class="input-group-addon">
															<i class="fa fa-calendar" ng-click="vm.openCalendar('filingDate')" ng-disabled="vm.isFieldDisable('filingDate')"></i>
														</span>
													</div>
												</div>
												<div class="form-group">
													<label for="field_expPax">Exp Pax</label>
													<input type="text" name="expPax" class="form-control"name="name" id="field_expPax"
			                    						ng-model="vm.workPackage.expPax" />
												</div>
												<div class="form-group">
													<label for="field_expRev">Exp Rev</label>
													<input type="text" name="expPax" class="form-control"name="name" id="field_expRev"
			                    						ng-model="vm.workPackage.expRev" />
												</div>
												<div class="form-group">
													<label for="field_saleDate">Sale Start Date</label>
													<div class="input-group">
														<input id="field_saleDate" type="text" 
															ng-class="{'must-fill': editForm.saleDate.$error.required}" 
		                    								ng-required="vm.checkRequiredField('saleDate')" 
		                    								name="saleDate" 
		                    								ng-disabled="vm.isFieldDisable('saleDate')" 
		                    								datetime-picker="{{dateformat}}" 
		                    								ng-model="vm.workPackage.saleDate" 
		                    								is-open="vm.datePickerOpenStatus.saleDate" class="form-control">
		                    								
														<span class="input-group-addon">
															<i class="fa fa-calendar" ng-click="vm.openCalendar('saleDate')" ng-disabled="vm.isFieldDisable('saleDate')"></i>
														</span>
													</div>
												</div>
												
												<div class="form-group">
													<label for="field_distributionDate">Distribution Date</label>
													<div class="input-group">
														<input type="text" id="field_distributionDate" name="distributionDate" class="form-control" ng-disabled="vm.isFieldDisable('distributionDate')" datetime-picker="{{dateformat}}" ng-model="vm.workPackage.distributionDate" is-open="vm.datePickerOpenStatus.distributionDate">
														<span class="input-group-addon disabled">
															<i class="fa fa-calendar" ng-click="vm.openCalendar('distributionDate')" ng-disabled="vm.isFieldDisable('distributionDate')"></i>
														</span>
													</div>
												</div>
												<div class="form-group">
													<label for="field_discExpiryDate">Disc/Expiry Date</label>
													<div class="input-group">
														<input type="text" id="field_discExpiryDate" name="discExpiryDate" class="form-control" datetime-picker="{{dateformat}}" ng-model="vm.workPackage.discExpiryDate" is-open="vm.datePickerOpenStatus.discExpiryDate"/>
														<span class="input-group-addon disabled">
															<i class="fa fa-calendar" ng-click="vm.openCalendar('discExpiryDate')" ng-disabled="true"></i>
														</span>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
							<div class="pull-left w50 two-column">
								<div class="box-detail box-comment">
									<div class="clearfix tab-body box-header box-tab">
										<ul class="clearfix nav-responsive nav nav-tabs">
										    <li ng-class="{active:vm.currentTabComment}" ng-click="$event.stopPropagation()"><a ng-click="vm.selectCommentTab('comment')">Comment</a></li>
										    <li ng-class="{active:vm.currentTabInterofficeComment}" ng-click="$event.stopPropagation()"><a ng-click="vm.selectCommentTab('interofficeComment')">Inter Office</a></li>
										    <li ng-class="{active:vm.currentTabRatesheetComment}" ng-click="$event.stopPropagation()"><a ng-click="vm.selectCommentTab('ratesheetComment')">Rate Sheet Comment</a></li>
										</ul>
										<div class="tab-content">
											<div ng-class="{active:vm.currentTabComment}" class="tab-pane" id="comment">
												<!-- <div class="box-header"/> -->
												<div class="box-body bbgrey">
													<div class="form-group">
														<label>Comment</label>
														<div text-angular="text-angular" name="comment" ng-model="vm.commentString" ta-disabled='disabled'/>
														<!-- <textarea ng-model="vm.commentString" class="form-control" rows="3" placeholder="Enter ..." id="comment-area"></textarea> -->
													</div>
													<div class="clearfix">
														<div class="pull-right">
															<button class="btn btn-default small btn-secondary" ng-click="vm.addComment(vm.commentString)" skip-disable></i>Send</button>
														</div>
													</div>										
												</div>
									        	 <div class="box-body">
									        		<div class="comment-wrapper">
										    			<div class="comment-list" ng-repeat="comment in vm.workPackage.comment.slice().reverse() track by $index">
													    	<div class="clearfix">
													    		<div class="pull-left comment-detail">{{comment.username}}</div>
													    		<div class="pull-right comment-detail">{{comment.createdTime | date: 'short'}}</div>
													    	</div>
													    	<div class="comment-message" ng-bind-html="comment.comment"/>
													    </div>
										    		</div>
									        	</div>
											</div>
											<div ng-class="{active:vm.currentTabInterofficeComment}" class="tab-pane" id="inter-office">
												<!-- <div class="box-header"/> -->
												<div class="box-body bbgrey">
													<div class="form-group">
														<label>Inter Office</label>
														<div text-angular="text-angular" name="interOffice" ng-model="vm.ioString" ta-disabled="vm.isFieldDisable('ioComment')" />
													</div>
													<div class="clearfix">
														<div class="pull-right">
															<button class="btn btn-default small btn-secondary" id="btn-inter-office" ng-click="vm.addInterOffice(vm.ioString)" ng-disabled="vm.isFieldDisable('ioComment')"></i>Send</button>
														</div>
													</div>										
												</div>
												<div class="box-body">
									        		<div class="comment-wrapper">
										    			<div class="comment-list" ng-repeat="comment in vm.workPackage.interofficeComment.slice().reverse() track by $index">
													    	<div class="clearfix">
													    		<div class="pull-left comment-detail">{{comment.username}}</div>
													    		<div class="pull-right comment-detail">{{comment.createdTime | date: 'short'}}</div>
													    	</div>
													    	<div class="comment-message" ng-bind-html="comment.comment"/>
													    </div>
										    		</div>
									        	</div>
											</div>
											<div ng-class="{active:vm.currentTabRatesheetComment}" class="tab-pane" id="rate-sheet-comment">
												<!-- <div class="box-header"/> -->
												<div class="box-body bbgrey">
													<div class="form-group">
														<label>Rate Sheet Comment</label>
														<textarea class="form-control" rows="3" id="ratesheetComment" ng-model="vm.workPackage.ratesheetComment" name="ratesheetComment"
									                    ng-disabled="vm.isFieldDisable('ratesheetComment')" 
									                    ng-style="editForm.ratesheetComment{{$index}}.$error.required && vm.errorStyle"
									                    ng-required="vm.checkRequiredField('ratesheetComment')"></textarea>
													</div>								
												</div>	 
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>						
						<!-- end of details -->
					</div>
				</div>

				<div class="panel panel-tabs">
					<div class="panel-body">
						<div class="clearfix mb1">
							<div class="pull-right">
								<div class="button-group dropdown">
									<button class="btn btn-default small">Workflow <i class="fa fa-caret-down"></i></button>
									<ul class="dropdown-menu" role="menu">
									    <li><a ng-click="vm.passUp()" 
								        ng-class="{disabled : editForm.$invalid }" 
								        ng-show="vm.workPackage.reviewLevel != 'HO' && vm.workPackage.reviewLevel != 'Distribution' && vm.workPackage.reviewLevel != 'Route Management'">Pass Up</a></li>
								        <li><a ng-click="vm.passDown()" 
								        ng-show="vm.workPackage.reviewLevel != 'LSO'  && vm.workPackage.reviewLevel != 'Route Management' && vm.workPackage.reviewLevel != 'Distribution'">Pass Down</a></li>
								        <li><a ng-click="vm.passSideway()" 
								        ng-class="{disabled : editForm.$invalid }" 
								        ng-show="vm.workPackage.reviewLevel == 'HO' || vm.workPackage.reviewLevel == 'Route Management'">Pass Sideways</a></li>
								        <li class="divider"></li>
								        <li><a ng-click="vm.approve()" 
								        ng-class="{disabled : editForm.$invalid }" 
								        ng-show="vm.workPackage.reviewLevel == 'HO'">Approve</a></li>
								        <li><a ng-click="vm.referback()" 
								        ng-show="vm.workPackage.reviewLevel == 'Distribution'"
								        >Refer Back</a></li>
									</ul>
								</div>
								<div class="button-group dropdown">
									<button class="btn btn-default small">Action <i class="fa fa-caret-down"></i></button>
									<ul class="dropdown-menu" role="menu">
									    <li>
									    	<a href="#">Save and Validate</a>
									    </li>
									</ul>
								</div>	
								<div class="button-group dropdown">
									<button class="btn btn-default small">Sheet <i class="fa fa-caret-down"></i></button>
									<ul class="dropdown-menu" role="menu">
									    <li>
									    	<a ng-click="vm.addSheet()" data-toggle="modal" data-target="#addNewsheet">Add</a>
									    </li>
									    <li>
									    	<a ng-click="vm.removeSheet()">Remove</a>
									    </li>
									    <!-- <li>
									    	<a href="#">Rename</a>
									    </li> -->
									    <li>
									    	<a ng-click="vm.copySheet()">Copy</a>
									    </li>
									</ul>
								</div>												
								<button class="btn btn-default small" ng-click="vm.save()">Save</button>
							</div>
						</div>

						<ng-form name="editFormATPCO" role="form" novalidate ng-if="vm.workPackage.targetDistribution == 'ATPCO' && vm.workPackage.type == 'REGULAR'">
							<div class="tab-wrapper" id="distribution-ATPCO">
								<div class="clearfix tab-body">
									<ul class="clearfix nav-responsive nav nav-tabs">
									    <li ng-if="vm.workPackage.specifiedFares" ng-class="{active:vm.currentTab[$index]}" ng-repeat="workPackageSheet in vm.workPackage.fareSheet track by $index"><a ng-click="vm.selectTab($index);">GA Fares : {{vm.workPackage.fareSheet[$index].specifiedFaresName}}</a></li>
									    <li ng-if="vm.workPackage.addon" ng-class="{active:vm.currentAddonTab[$index]}" ng-repeat="workPackageSheet in vm.workPackage.addonFareSheet track by $index"><a ng-click="vm.selectAddonTab($index);">Addon Fares : {{vm.workPackage.addonFareSheet[$index].addonFaresName}}</a></li>
									    <li ng-if="vm.workPackage.discount" ng-class="{active:vm.currentDiscountTab[$index]}" ng-repeat="workPackageSheet in vm.workPackage.discountFareSheet track by $index"><a ng-click="vm.selectDiscountTab($index);">Discount Fares : {{vm.workPackage.discountFareSheet[$index].discountFaresName}}</a></li>
									   
									    <li ng-if="vm.workPackage.filingInstruction" ng-class="{active:vm.currentTabFilingInstruction}"><a ng-click="vm.selectOtherTab('filingInstruction')">Filing Instruction</a></li>
									    <li ng-if="vm.workPackage.attachment" ng-class="{active:vm.currentTabAttachment}"><a ng-click="vm.selectOtherTab('attachment')">Attachment</a></li>
									    <li ng-class="{active:vm.currentTabFilingDetail}"><a ng-click="vm.selectOtherTab('filingDetail')">Filling Details</a></li>
									</ul>
									<div class="tab-content">
										<div class="tab-pane" ng-class="{active:vm.currentTab[$index]}" ng-repeat="workPackageSheet in vm.workPackage.fareSheet track by $index">
											<div class="pb1 mb1 bbgrey">
												<div class="clearfix">
													<div class="pull-left w50 two-column">
														<div class="form-group">
															<label>Description</label>
															<input type="text" name="description{{$index}}" class="form-control"
															ng-class="{'must-fill': editForm.editFormATPCO.description{{$index}}.$error.required && fare.action != 'Canceled'}"
											         		ng-model="workPackageSheet.specifiedFaresName" 
											         		ng-required="vm.checkRequiredField('description')"  
											         		ng-disabled="vm.isFieldDisable('description')">
														</div>
													</div>
													<div class="pull-left w50 two-column">
														<div class="form-group">
															<label>Approval Reference</label>
															<input type="text" name="approvalReference{{$index}}" class="form-control" 
															ng-class="{'must-fill': editForm.editFormATPCO.approvalReference{{$index}}.$error.required && fare.action != 'Canceled'}"
												            ng-model="workPackageSheet.approvalReference"
															ng-disabled="vm.isFieldDisable('approvalReference')"
															ng-required="vm.checkRequiredField('approvalReference')">
														</div>
													</div>
												</div>
												
												<div class="clearfix">
													<div class="pull-left w50 two-column">
														<div class="form-group">
															<label>Fare Type</label>
															
															<select 
										      				class="form-control" 
										      				name="fareType{{$index}}"
										      				ng-model="workPackageSheet.fareType" 
										      				ng-class="{'must-fill': !editForm.editFormATPCO.fareType{{$index}}.$valid && fare.action != 'Canceled'}"
										      				ng-options="key as value for (key , value) in vm.fareType"
										      				ng-required="vm.checkRequiredField('fareType')"
										      				ng-disabled="vm.isFieldDisable('fareType')"></select>										      				
														</div>
													</div>
													<div class="pull-left w50 two-column">
														<div class="form-group">
															<label>Version</label>
															<select class="form-control">
																<option>Select Version</option>
																<option>Current</option>
															</select>
														</div>
													</div>
												</div>
												
												<!-- table details-->
												<div class="table-wrapper">
													<div class="datatable-wrapper form-inline">
														<div class="clearfix">
															<div class="pull-left">
																<div class="clearfix">
																	<div class="pull-right datatable-button">
																		<div class="button-group dropdown">
																			<button class="btn btn-default small btn-secondary">Edit <i class="fa fa-caret-down"></i></button>
																			<ul class="dropdown-menu" role="menu">
																			    <li>
																			    	<a href="#">Clear Selection</a>
																			    </li>
																			    <li>
																			    	<a href="#">Fill Down</a>
																			    </li>
																			    <li>
																			    	<a href="#">Search/Replace</a>
																			    </li>
																			    <li>
																			    	<a ng-click="vm.addFares()">Add Rows</a>
																			    </li>
																			    <li>
																			    	<a href="#">Delete Selected Rows</a>
																			    </li>
																			    <li>
																			    	<a href="#">Duplicate Selected Rows</a>
																			    </li>
																			    <li>
																			    	<a href="#">Copy Selected Rows</a>
																			    </li>
																			    <li>
																			    	<a href="#">Paste</a>
																			    </li>
																			    <li>
																			    	<a href="#">Paste As Cancel</a>
																			    </li>
																			</ul>
																		</div>													
																		<button class="btn btn-default small btn-secondary">Import</button>
																		<button class="btn btn-default small btn-secondary">Export</button>
																		<button class="btn btn-default small btn-secondary" data-toggle="modal" data-target="#modalAgent">Agents</button>
																		<button class="btn btn-default small btn-secondary" data-toggle="modal" data-target="#modalRatesheet">Rate Sheet</button>
																	</div>
																</div>																						
															</div>
														</div>
													</div>
													<div class="table-responsive">
														<table class="table table-stripped table-bordered datatable">
															<thead>
																<tr role="row">
																	<th class="sorting_asc" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1" aria-sort="ascending">No</th>
																	<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Status</th>
																	<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Carrier</th>
																	<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Action</th>
																	<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Tar No</th>
																	<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Tar Cd</th>
																	<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Global</th>
																	<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Origin</th>
																	<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Dest</th>
																	<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Fare Cls</th>
																	<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Bkg Cls</th>
																	<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Cabin</th>
																	<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">OW/RT</th>
																	<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Ftnt</th>
																	<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Rtg No</th>
																	<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Rule No</th>
																	<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Curr</th>
																	<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Base Amt</th>
																	<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Target Aif</th>
																	<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Travel Start</th>
																	<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Travel End</th>
																	<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Sale Start</th>
																	<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Sale End</th>
																	<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Comment</th>
																	<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Travel Complete</th>
																	<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Travel Complete Indicator</th>
																	<th class="sorting" tabindex="0" aria-controls="datatable-tabletools" rowspan="1" colspan="1">Ratesheet Comment</th>
																</tr>
															</thead>
															<tbody ng-repeat="fare in vm.workPackage.fareSheet[vm.selectedTab].fares track by $index" >
																<tr role="row" class="datatable-row" ng-click="vm.rowTableClick($event, $index)">
																	<td>{{$index+1}}</td>
																	<td>
																		<span ng-if="vm.isFieldEditable(fare, 'status')">
																			<select class="form-control inside-table" name="status{{$parent.$index}}{{$index}}" ng-model="fare.status" id="field_status" 
																				ng-class="{'must-fill': !editForm.editFormATPCO.status{{$parent.$index}}{{$index}}.$valid && fare.action != 'Canceled'}"												         		
											           							ng-disabled="vm.isFieldDisable('status')"
																             	ng-required="vm.checkRequiredField('status')"
																             	ng-options="key as value for (key , value) in vm.status">
																			</select>																				
																		</span>
																		<span class="inside-table" ng-if="!vm.isFieldEditable(fare, 'status')">
												           					{{fare.status}}
												           				</span>
																	</td>
																	<td>
																		<span ng-if="vm.isFieldEditable(fare, 'carrier')">
												           					<input type="text" class="form-control" name="carrier{{$parent.$index}}{{$index}}" id="field_carrier"
													                    		ng-model="fare.carrier"
													                    		ng-disabled="vm.isFieldDisable('carrier')"
													                    		ng-class="{'must-fill': ditForm.editFormATPCO.carrier{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"												         		
																	            ng-required="vm.checkRequiredField('carrier')"/>
												           				</span>
												           				<span ng-if="!vm.isFieldEditable(fare, 'carrier')">
												           					{{fare.carrier}}
												           				</span>
																	</td>																
																	<td>{{fare.action}}</td>
																	<td>
																		<ui-select ng-model="fare.tariffNumber" name="tarno{{$parent.$index}}{{$index}}" theme="select2" ng-disabled="vm.disabled" title="Choose a person"  class="form-control"
																		 ng-click="$event.stopPropagation()"
																		ng-required="vm.checkRequiredField('tarno') && fare.action != 'Canceled'"  
																		ng-disabled="vm.isFieldDisable('tarno')"
																		ng-class="{'must-fill': editForm.editFormATPCO.tarno{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"	
													                    	>
																		    <ui-select-match placeholder="TarNo">{{$select.selected.tarNo == null ? $select.selected.value.tarNo : $select.selected.tarNo}}</ui-select-match>
																			 <ui-select-choices style="min-width:300px" repeat="value.value as (key, value) in vm.tariffNumber | filter: { value: { tarNo: $select.search }}">
																		      <div ng-bind-html="value.value.tarNo | highlight: $select.search"></div>
																		      <small>
																		        TarNo : {{value.value.tarNo}}
																		        TarCd : {{value.value.tarCd}}
																		        Global : {{value.value.global}}
																		      </small>
																		    </ui-select-choices>
																		  </ui-select>
																		  
																		<!-- <span ng-if="vm.isFieldEditable(fare, 'tarno')">								
												           					<input type="text" class="form-control" name="tarno{{$parent.$index}}{{$index}}" id="field_tarno" 
												           					ng-required="vm.checkRequiredField('tarno') && fare.action != 'Canceled'"  
												           					ng-class="{'must-fill': editForm.editFormATPCO.tarno{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"	
													                    	ng-model="fare.tarno" 
													                    	ng-disabled="vm.isFieldDisable('tarno')" />
												           				</span>
												           				<span ng-if="!vm.isFieldEditable(fare, 'tarno')">
												           					{{fare.tarno}}
												           				</span> -->
																	</td>
																	<td>
																		<ui-select ng-model="fare.tariffNumber" theme="select2" ng-disabled="vm.disabled" class="form-control"
																		 ng-click="$event.stopPropagation()"
																		name="tarcd{{$parent.$index}}{{$index}}"
																		ng-required="vm.checkRequiredField('tarcd') && fare.action != 'Canceled'"  
																		ng-disabled="vm.isFieldDisable('tarcd')"
																		
																		ng-class="{'must-fill': editForm.editFormATPCO.tarcd{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"	
													                    	>
																		    <ui-select-match placeholder="TarCd">{{$select.selected.tarCd == null ? $select.selected.value.tarCd : $select.selected.tarCd}}</ui-select-match>
																			 <ui-select-choices style="min-width:300px" repeat="value.value as (key, value) in vm.tariffNumber | filter: { value: { tarCd: $select.search }}">
																		      <div ng-bind-html="value.value.tarCd | highlight: $select.search"></div>
																		      <small>
																		        TarNo : {{value.value.tarNo}}
																		        TarCd : {{value.value.tarCd}}
																		        Global : {{value.value.global}}
																		      </small>
																		    </ui-select-choices>
																		  </ui-select>
																		<!-- <span ng-if="vm.isFieldEditable(fare, 'tarcd')">
												           					<input type="text" class="form-control" name="tarcd{{$parent.$index}}{{$index}}" id="field_tarcd" 
												           					ng-disabled="vm.isFieldDisable('tarcd')"
												           					ng-required="vm.checkRequiredField('tarcd') && fare.action != 'Canceled'"  
												           					ng-class="{'must-fill': editForm.editFormATPCO.tarcd{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"	
													                    	ng-model="fare.tarcd"/>
												           				</span>
												           				<span ng-if="!vm.isFieldEditable(fare, 'tarcd')">
													           				{{fare.tarcd}}
												           				</span> -->
																	</td>
																	<td>{{fare.tariffNumber.global}}</td>
																	<td>
																		<ui-select ng-model="fare.origin" theme="select2" ng-disabled="vm.disabled" class="form-control"
																		 ng-click="$event.stopPropagation()"
																		name="origin{{$parent.$index}}{{$index}}"
																		ng-required="vm.checkRequiredField('origin') && fare.action != 'Canceled'"  
																		ng-disabled="vm.isFieldDisable('origin')"
																		
																		ng-class="{'must-fill': editForm.editFormATPCO.origin{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"	
													                    	>
																		    <ui-select-match placeholder="Origin">{{$select.selected.value.cityCode}}</ui-select-match>
																			 <ui-select-choices style="min-width:300px" repeat="value.value.cityCode as (key, value) in vm.cities | filter: { value: { cityCode: $select.search }}">
																		      <div ng-bind-html="value.value.cityCode | highlight: $select.search"></div>
																		      <small>
																		        City Code : {{value.value.cityCode}}
																		        City Name : {{value.value.cityName}}
																		        Country Code : {{value.value.countryCode}}
																		        Country Name : {{value.value.countryName}}
																		        
																		      </small>
																		    </ui-select-choices>
																		  </ui-select>
																		  
																		<!-- <span ng-if="vm.isFieldEditable(fare, 'origin')">
											                				<input type="text" class="form-control" name="origin{{$parent.$index}}{{$index}}" id="field_origin" 
											                				ng-disabled="vm.isFieldDisable('origin')"
											                				 ng-click="$event.stopPropagation()"
											                				ng-required="vm.checkRequiredField('origin') && fare.action != 'Canceled'"  
											                				ng-class="{'must-fill': editForm.editFormATPCO.origin{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"	
													                    	ng-model="fare.origin"/>
											                			
											                			</span>
											                			<span ng-if="!vm.isFieldEditable(fare, 'origin')">
											                			{{fare.origin}}
											                			</span> -->
																	</td>
																	<td>
																	<ui-select ng-model="fare.destination" theme="select2" ng-disabled="vm.disabled" class="form-control"
																		 ng-click="$event.stopPropagation()"
																		name="destination{{$parent.$index}}{{$index}}"
																		ng-required="vm.checkRequiredField('destination') && fare.action != 'Canceled'"  
																		ng-disabled="vm.isFieldDisable('destination')"
																		
																		ng-class="{'must-fill': editForm.editFormATPCO.destination{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"	
													                    	>
																		    <ui-select-match placeholder="Destination">{{$select.selected.value.cityCode}}</ui-select-match>
																			 <ui-select-choices style="min-width:300px" repeat="value.value.cityCode as (key, value) in vm.cities | filter: { value: { cityCode: $select.search }}">
																		      <div ng-bind-html="value.value.cityCode | highlight: $select.search"></div>
																		      <small>
																		        City Code : {{value.value.cityCode}}
																		        City Name : {{value.value.cityName}}
																		        Country Code : {{value.value.countryCode}}
																		        Country Name : {{value.value.countryName}}
																		        
																		      </small>
																		    </ui-select-choices>
																		  </ui-select>
																		<!-- <span ng-if="vm.isFieldEditable(fare, 'destination')">
											                				<input type="text" class="form-control" name="destination{{$parent.$index}}{{$index}}" id="field_destination" 
											                				ng-disabled="vm.isFieldDisable('destination')"
											                				 ng-click="$event.stopPropagation()"
											                				ng-required="vm.checkRequiredField('destination') && fare.action != 'Canceled'"  
											                				ng-class="{'must-fill': editForm.editFormATPCO.destination{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"	
												                    		ng-model="fare.destination"/>
											                			
											                			</span>
											                			<span ng-if="!vm.isFieldEditable(fare, 'destination')">
											                			{{fare.destination}}
											                			</span> -->
																	</td>
																	<td>
																		<span ng-if="vm.isFieldEditable(fare, 'farebasis')">
											                				<input type="text" class="form-control" name="farebasis{{$parent.$index}}{{$index}}" id="field_farebasis"
											                				ng-disabled="vm.isFieldDisable('farebasis')"
											                				 ng-click="$event.stopPropagation()"
											                				ng-required="vm.checkRequiredField('farebasis') && fare.action != 'Canceled'" 
											                				ng-class="{'must-fill': editForm.editFormATPCO.farebasis{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"	
												                    		ng-model="fare.fareBasis"/>												                			
											                			</span>
											                			<span ng-if="!vm.isFieldEditable(fare, 'farebasis')">
											                			{{fare.fareBasis}}
											                			</span>
																	</td>	
																	<td>
																		<span ng-if="vm.isFieldEditable(fare, 'bookingClass')">
											                				<input type="text" class="form-control" name="bookingClass{{$parent.$index}}{{$index}}" id="field_bookingClass"
											                				ng-disabled="vm.isFieldDisable('bookingClass')"
											                				ng-required="vm.checkRequiredField('bookingClass') && fare.action != 'Canceled'" 
											                				ng-class="{'must-fill': editForm.editFormATPCO.bookingClass{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"	
												                    		ng-model="fare.bookingClass"/>												                			
											                			</span>
											                			<span ng-if="!vm.isFieldEditable(fare, 'bookingClass')">
											                				{{fare.bookingClass}}
											                			</span>
																	</td>
																	<td>
												           				<span ng-if="vm.isFieldEditable(fare, 'cabin')">									           						
												           					<select class="form-control" 
																             name="cabin{{$parent.$index}}{{$index}}"
																             ng-required="vm.checkRequiredField('cabin')"
																             ng-click="$event.stopPropagation()"
																             ng-class="{'must-fill': !editForm.editFormATPCO.cabin{{$parent.$index}}{{$index}}.$valid && fare.action != 'Canceled'}"	
																             ng-model="fare.cabin" id="field_cabin" 
																             ng-disabled="vm.isFieldDisable('cabin')"
																             ng-options="key as value for (key , value) in vm.cabin"></select>
												                			
												                			</span>
												                			<span ng-if="!vm.isFieldEditable(fare, 'cabin')">
												                				{{fare.cabin}}
												                			</span>
												           			</td>
												           			<td>
												           				<span ng-if="vm.isFieldEditable(fare, 'typeOfJourney')">
											                				<select class="form-control" 
																             name="typeOfJourney{{$parent.$index}}{{$index}}"
																             ng-required="vm.checkRequiredField('typeOfJourney')"
																             ng-class="{'must-fill': !editForm.editFormATPCO.typeOfJourney{{$parent.$index}}{{$index}}.$valid && fare.action != 'Canceled'}"																			            
																             ng-model="fare.typeOfJourney" id="field_typeOfJourney"
																             ng-disabled="vm.isFieldDisable('typeOfJourney')"
																             ng-options="key as value for (key , value) in vm.typeOfJourney"></select>
											                			</span>
											                			<span ng-if="!vm.isFieldEditable(fare, 'typeOfJourney')">
											                				<span ng-if="fare.typeOfJourney == 'One Way'">1</span>
													           				<span ng-if="fare.typeOfJourney == 'Return'">2</span>
													           				<span ng-if="fare.typeOfJourney == 'One Way Only'">3</span>
											                			</span>
												           			</td>
											               			<td>
											               				<span ng-if="vm.isFieldEditable(fare, 'footnote')">
												                				<input type="text" class="form-control" name="footnote{{$parent.$index}}{{$index}}" id="field_footnote"
																	            ng-class="{'must-fill': editForm.editFormATPCO.footnote{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            
																	            ng-disabled="vm.isFieldDisable('footnote')"
																	            ng-required="vm.checkRequiredField('footnote')"
													                    		ng-model="fare.footnote"/>
												                			
												                			</span>
												                			<span ng-if="!vm.isFieldEditable(fare, 'footnote')">
												                				{{fare.footnote}}
												                			</span>
											               			</td>
											               			<td>
											               				<span ng-if="vm.isFieldEditable(fare, 'rtgno')">
												                				<input type="text" class="form-control" name="rtgno{{$parent.$index}}{{$index}}" id="field_bookingClass"
												                				ng-disabled="vm.isFieldDisable('rtgno')"
												                				ng-required="vm.checkRequiredField('rtgno')" 
												                				ng-class="{'must-fill': editForm.editFormATPCO.rtgno{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            
																	            ng-model="fare.rtgno"/>
												                			
												                			</span>
												                			<span ng-if="!vm.isFieldEditable(fare, 'rtgno')">
												                				{{fare.rtgno}}
												                			</span>
											               			</td>
											               			<td>
											               				<span ng-if="vm.isFieldEditable(fare, 'ruleno')">
												                				<input type="text" class="form-control" name="ruleno{{$parent.$index}}{{$index}}" id="field_bookingClass"
												                				ng-disabled="vm.isFieldDisable('ruleno')"
												                				ng-required="vm.checkRequiredField('ruleno')" 
												                				ng-class="{'must-fill': editForm.editFormATPCO.ruleno{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            
																	            ng-model="fare.ruleno"/>
												                			
												                			</span>
												                			<span ng-if="!vm.isFieldEditable(fare, 'ruleno')">
												                				{{fare.ruleno}}
												                			</span>
											               			</td>
											               			<td>
												               			<ui-select ng-model="fare.currency" theme="select2" ng-disabled="vm.disabled" class="form-control"
																			 ng-click="$event.stopPropagation()"
																			name="currency{{$parent.$index}}{{$index}}"
																			ng-required="vm.checkRequiredField('currency') && fare.action != 'Canceled'"  
																			ng-disabled="vm.isFieldDisable('currency')"
																			
																			ng-class="{'must-fill': editForm.editFormATPCO.currency{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"	
														                    	>
																			    <ui-select-match placeholder="Currency">{{$select.selected.value.currencyCode}}</ui-select-match>
																				 <ui-select-choices style="min-width:300px" repeat="value.value.currencyCode as (key, value) in vm.currencies | filter: { value: { currencyCode: $select.search }}">
																			      <div ng-bind-html="value.value.currencyCode | highlight: $select.search"></div>
																			      <small>
																			        Currency Code : {{value.value.currencyCode}}
																			        Currency Name : {{value.value.currencyName}}
																			        
																			      </small>
																			    </ui-select-choices>
																			  </ui-select>
											               				<!-- <span ng-if="vm.isFieldEditable(fare, 'currency')">
											                				<input type="text" class="form-control" name="currency{{$parent.$index}}{{$index}}" id="field_currency{{$parent.$index}}{{$index}}"
											                				ng-disabled="vm.isFieldDisable('currency')"
											                				ng-required="vm.checkRequiredField('currency')" 
											                				ng-class="{'must-fill': editForm.editFormATPCO.currency{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            
																            ng-model="fare.currency"/>
											                			
											                			</span> -->
											                			<span ng-if="!vm.isFieldEditable(fare, 'currency')">
											                				{{fare.currency}}
											                			</span>
											               			</td>
											               			<td>
											               				<span ng-if="vm.isFieldEditable(fare, 'amount')">
												                				<input type="text" class="form-control" name="amount{{$parent.$index}}{{$index}}" id="field_bookingClass"
												                				ng-disabled="vm.isFieldDisable('amount')"
												                				ng-required="vm.checkRequiredField('amount')" 
												                				ng-class="{'must-fill': editForm.editFormATPCO.amount{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            
																	            ng-model="fare.amount"/>
												                			
												                			</span>
												                			<span ng-if="!vm.isFieldEditable(fare, 'amount')">
												                				{{fare.amount}}
												                			</span>
											               			</td>
											               			<!--  
											               			<td>{{fare.recommendedAmount - fare.amount}}</td>
											               			<td>{{(fare.recommendedAmount - fare.amount) / fare.amount * 100 | number : 2}} %</td>
											               		    <td ng-show="vm.showTFC">{{fare.yqyr}}</td>
												               		<td ng-show="vm.showTFC">{{fare.cat12}}</td>
												               		<td ng-show="vm.showTFC">{{fare.totalTax}}</td>   
												               		<td>{{fare.tfc}}</td>   
												               		<td class="input"  >
												               			<span ng-if="vm.isFieldEditable(fare, 'aif')">
												                				<input type="text" class="form-control" name="aif{{$index}}" id="field_bookingClass"
												                				ng-disabled="fare.action == 'Canceled'"
												                				ng-required="vm.checkRequiredField('aif')" ng-style="editForm.editFormATPCO.aif{{$index}}.$error.required && fare.action != 'Canceled' && vm.errorStyle"
													                    		ng-change="vm.fareAifChange(fare)"
													                    		ng-model="fare.aif"/>
												                			
												                			</span>
												                			<span ng-if="!vm.isFieldEditable(fare, 'aif')">
												               				{{fare.aif}}
												                			</span>
												               		</td>   
												               		
												               		<td></td>
											               			<td></td>
											               			-->
											               			
											               			<td>
												               			<span ng-if="vm.isFieldEditable(fare, 'aif')">
												                				<input type="text" class="form-control" name="aif{{$parent.$index}}{{$index}}" id="field_bookingClass"
												                				ng-disabled="vm.isFieldDisable('aif')"
												                				ng-required="vm.checkRequiredField('aif')" 
												                				ng-class="{'must-fill': editForm.editFormATPCO.aif{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            
																	            ng-model="fare.aif"/>
												                			
												                			</span>
												                			<span ng-if="!vm.isFieldEditable(fare, 'aif')">
												               				{{fare.aif}}
												                			</span>
												               		</td> 
											               			<td>
											               					<span ng-if="vm.isFieldEditable(fare, 'travelStartDate')">
												                				<input type="text" class="form-control" name="travelStartDate{{$parent.$index}}{{$index}}" id="field_travelStartDate"
												                				ng-disabled="vm.isFieldDisable('travelStartDate')"
												                				ng-required="vm.checkRequiredField('travelStartDate')"
												                				ng-class="{'must-fill': editForm.editFormATPCO.travelStartDate{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            
																	            ng-model="fare.travelStart"
																	            datetime-picker="{{dateformat}}"/>
																				
																			</span>
												                			<span ng-if="!vm.isFieldEditable(fare, 'travelStartDate')">
												               				{{fare.travelStart}}
												                			</span>
											               			
											               			</td>
											               			<td>
											               				<span ng-if="vm.isFieldEditable(fare, 'travelEndDate')">
												                				<input type="text" class="form-control" name="travelEndDate{{$parent.$index}}{{$index}}" id="field_travelEndDate"
												                				ng-disabled="vm.isFieldDisable('travelEndDate')"
												                				ng-required="vm.checkRequiredField('travelEndDate')"
												                				ng-class="{'must-fill': editForm.editFormATPCO.travelEndDate{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            
																	            ng-model="fare.travelEnd"/>
												                			
												                			</span>
												                			<span ng-if="!vm.isFieldEditable(fare, 'travelEndDate')">
												               				{{fare.travelEnd}}
												                			</span>
											               			</td>
											               			<td>
											               				<span ng-if="vm.isFieldEditable(fare, 'saleStartDate')">
												                				<input type="text" class="form-control" name="saleStartDate{{$parent.$index}}{{$index}}" id="field_saleStartDate"
												                				ng-disabled="vm.isFieldDisable('saleStartDate')"									                				
												                				ng-required="vm.checkRequiredField('saleStartDate')"
													                    		ng-class="{'must-fill': editForm.editFormATPCO.saleStartDate{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            
																	            ng-model="fare.saleStart"/>
												                			
												                			</span>
												                			<span ng-if="!vm.isFieldEditable(fare, 'saleStartDate')">
												               				{{fare.saleStart}}
												                			</span>
											               			</td>
											               			<td>
											               					<span ng-if="vm.isFieldEditable(fare, 'saleEndDate')">
												                				<input type="text" class="form-control" name="saleEndDate{{$parent.$index}}{{$index}}" id="field_saleEndDate"
												                				ng-disabled="vm.isFieldDisable('saleEndDate')"
												                				ng-required="vm.checkRequiredField('saleEndDate')"
													                    		ng-class="{'must-fill': editForm.editFormATPCO.saleEndDate{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            
																	            ng-model="fare.saleEnd"/>
												                			
												                			</span>
												                			<span ng-if="!vm.isFieldEditable(fare, 'saleEndDate')">
												               				{{fare.saleEnd}}
												                			</span>
											               			</td>
											               			<td>
											               				<input type="text" class="form-control" name="comment{{$parent.$index}}{{$index}}" id="field_comment"
													                    		ng-model="fare.comment"/>
											               			</td>
											               			<td>
											               				<span ng-if="vm.isFieldEditable(fare, 'travelComplete')">
											                				<input type="text" class="form-control" name="travelComplete{{$parent.$index}}{{$index}}" id="field_travelComplete"
											                				ng-disabled="vm.isFieldDisable('travelComplete')"
											                				ng-required="vm.checkRequiredField('travelComplete')"
												                    		ng-class="{'must-fill': editForm.editFormATPCO.travelComplete{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            														                    		
											                				ng-model="fare.travelComplete"/>
												                			
												                			</span>
												                			<span ng-if="!vm.isFieldEditable(fare, 'travelComplete')">
												               				{{fare.travelComplete}}
												                			</span>
											               			</td>
											               			<td>
											               				<span ng-if="vm.isFieldEditable(fare, 'travelIndicator')">
												                				<select class="form-control" name="travelIndicator{{$parent.$index}}{{$index}}" id="field_travelIndicator"
												                				ng-disabled="vm.isFieldDisable('travelIndicator')"
												                				ng-required="vm.checkRequiredField('travelIndicator')"
													                    		ng-class="{'must-fill': !editForm.editFormATPCO.travelIndicator{{$parent.$index}}{{$index}}.$valid && fare.action != 'Canceled'}"	
													                    		
													                    		ng-options="key as value for (key , value) in vm.travelCompleteIndicator"
																             																		            														                    		
												                				ng-model="fare.travelCompleteIndicator"></select>
												                			
												                			</span>
												                			<span ng-if="!vm.isFieldEditable(fare, 'travelIndicator')">
												               				{{fare.travelCompleteIndicator}}
												                			</span>
											               			</td>
											               			<td>
											               				<span ng-if="vm.isFieldEditable(fare, 'ratesheetComment')">
												                				<input type="text" class="form-control" name="ratesheetComment{{$parent.$index}}{{$index}}" id="field_ratesheetComment"
												                				ng-disabled="vm.isFieldDisable('ratesheetComment')"
												                				ng-required="vm.checkRequiredField('ratesheetComment')"
													                    		ng-class="{'must-fill': editForm.editFormATPCO.ratesheetComment{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            														                    		
													                    		ng-model="fare.ratesheetComment"/>
												                			
												                			</span>
												                			<span ng-if="!vm.isFieldEditable(fare, 'ratesheetComment')">
												               				{{fare.ratesheetComment}}
												                			</span>
											               			</td>
																</tr>
																<tr class="datatable-action{{$index}}" ng-show="vm.faresActionButton[$index]">
																	<td colspan="18" class="">
																		<div class="btn btn-app">
																			<i class="fa fa-level-up"></i>Move Up
																		</div>
																		<div class="btn btn-app">
																			<i class="fa fa-level-down"></i>Move Down
																		</div>	
																		<div class="btn btn-app">
																			<i class="fa fa-stack-exchange"></i>Derived Fares
																		</div>
																	</td>
																</tr>
															</tbody>
														</table>
													</div>
												</div>
											</div>
											
											<div class="tab-pane" ng-class="{active:vm.currentTabFilingInstruction}" ng-if="vm.workPackage.filingInstruction">
												<div class="text-center no-data">No Filing Instruction Available</div>
											</div>
											
											<div class="tab-pane" ng-class="{active:vm.currentTabAttachment}" ng-if="vm.workPackage.attachment">
												
											</div>
											
											<div class="tab-pane" ng-class="{active:vm.currentTabFilingDetail}">
												<div class="text-center no-data">No Filling Detail Available</div>
											</div>										
									</div>
								</div>
							</div>
						</ng-form>
						
						<ng-form name="editFormDiscount" role="form" novalidate ng-if="vm.workPackage.targetDistribution == 'ATPCO' && vm.workPackage.type == 'DISCOUNT'">
							<div class="tab-wrapper">
								<div class="clearfix tab-body">
									<ul class="clearfix nav-responsive nav nav-tabs">
									    <li ng-if="vm.workPackage.discount" ng-class="{active:vm.currentDiscountTab[$index]}" ng-repeat="workPackageSheet in vm.workPackage.discountFareSheet track by $index">
									    	<a ng-click="vm.selectDiscountTab($index);">Discount Fares : {{vm.workPackage.discountFareSheet[$index].discountFaresName}}</a>
									    </li>
									    <li ng-if="vm.workPackage.filingInstruction" ng-class="{active:vm.currentTabFilingInstruction}"><a ng-click="vm.selectOtherTab('filingInstruction')">Filing Instruction</a></li>
									    <li ng-if="vm.workPackage.attachment" ng-class="{active:vm.currentTabAttachment}"><a ng-click="vm.selectOtherTab('attachment')">Attachment</a></li>
									    <li ng-class="{active:vm.currentTabFilingDetail}"><a ng-click="vm.selectOtherTab('filingDetail')">Filling Details</a></li>
									</ul>
									<div class="tab-content">
										<div class="tab-pane" ng-class="{active:vm.currentDiscountTab[$index]}" ng-repeat="workPackageSheet in vm.workPackage.discountFareSheet track by $index">
											<div class="pb1 mb1 bbgrey">
												<div class="clearfix">
													<div class="pull-left w50 two-column">
														<div class="form-group">
															<label>Description</label>
															<input type="text" name="discountFaresName{{$index}}" class="form-control"
															ng-class="{'must-fill': editForm.editFormDiscount.discountFaresName{{$index}}.$error.required}"
											         		ng-model="workPackageSheet.discountFaresName" 
											         		ng-required="vm.checkRequiredField('discountFaresName')"  
											         		ng-disabled="vm.isFieldDisable('discountFaresName')">
														</div>
													</div>
													<div class="pull-left w50 two-column">
														<div class="form-group">
															<label>Approval Reference</label>
															<input type="text" name="discountApprovalReference{{$index}}" class="form-control" 
															ng-class="{'must-fill': editForm.editFormDiscount.discountApprovalReference{{$index}}.$error.required}"
												            ng-model="workPackageSheet.discountApprovalReference"
															ng-disabled="vm.isFieldDisable('discountApprovalReference')"
															ng-required="vm.checkRequiredField('discountApprovalReference')">
														</div>
													</div>
												</div>
												<div class="clearfix">
													<div class="pull-left w50 two-column">
														<div class="form-group">
															<label>Account Code</label>
															<input type="text" name="discountAccountCode{{$index}}" class="form-control" 
															ng-class="{'must-fill': editForm.editFormDiscount.discountAccountCode{{$index}}.$error.required}"
												            ng-model="workPackageSheet.accountCode"
															ng-disabled="vm.isFieldDisable('discountAccountCode')"
															ng-required="vm.checkRequiredField('discountAccountCode')">
														</div>
													</div>
													<div class="pull-left w50 two-column">
														<div class="form-group">
															<label>Version</label>
															<select class="form-control">
																<option>Select Version</option>
																<option>Current</option>
															</select>
														</div>
													</div>
												</div>
												<div class="clearfix">
													<div class="pull-left w50 two-column">
														<div class="form-group">
															<label>Fare Type</label>
															<select class="form-control" name="discountFareType{{$index}}" ng-model="workPackageSheet.discountFareType" 
										      					ng-class="{'must-fill': !editForm.editFormDiscount.discountFareType{{$index}}.$valid}"
										      					ng-options="key as value for (key , value) in vm.fareType"
										      					ng-required="vm.checkRequiredField('discountFareType')"
										      					ng-disabled="vm.isFieldDisable('discountFareType')"></select>										      				
														</div>
													</div>
													<div class="pull-left w50 two-column">
													</div>
												</div>
											</div>
											
											<!-- table details-->
											<div class="table-wrapper">
												<div class="datatable-wrapper form-inline">
													<div class="clearfix">
														<div class="pull-left">
															<div class="clearfix">
																<div class="pull-right datatable-button">
																	<div class="button-group dropdown">
																		<button class="btn btn-default small btn-secondary">Edit <i class="fa fa-caret-down"></i></button>
																		<ul class="dropdown-menu" role="menu">
																		    <li>
																		    	<a href="#">Clear Selection</a>
																		    </li>
																		    <li>
																		    	<a href="#">Fill Down</a>
																		    </li>
																		    <li>
																		    	<a href="#">Search/Replace</a>
																		    </li>
																		    <li>
																		    	<a ng-click="vm.addDiscountFares()">Add Rows</a>
																		    </li>
																		    <li>
																		    	<a href="#">Delete Selected Rows</a>
																		    </li>
																		    <li>
																		    	<a href="#">Duplicate Selected Rows</a>
																		    </li>
																		    <li>
																		    	<a href="#">Copy Selected Rows</a>
																		    </li>
																		    <li>
																		    	<a href="#">Paste</a>
																		    </li>
																		    <li>
																		    	<a href="#">Paste As Cancel</a>
																		    </li>
																		</ul>
																	</div>													
																	<button class="btn btn-default small btn-secondary">Import</button>
																	<button class="btn btn-default small btn-secondary">Export</button>
																	<button class="btn btn-default small btn-secondary" data-toggle="modal" data-target="#modalAgent">Agents</button>
																</div>
															</div>
														</div>
														<div class="clearfix">
															<div class="pull-left dataTables_info italic">
																* Field can not be empty.
															</div>
														</div>	
													</div>
													<div class="table-responsive">
														<table class="table table-stripped table-bordered datatable">
															<thead>
																<tr role="row">
																	<th>No</th>
											                		<th>Status</th>
											                		<th>FBR Tariff Code</th>
												                	<th>Loc 1 Type</th>		                	
											                		<th>Loc 1</th>
												                	<th>Loc 2 Type</th>
												                	<th>Loc 2</th>
												                	<th>Base FareCls</th>
												                	<th>Base Rule No</th>
												                	<th>Base Tariff Code</th>
												                	<th>Calc Type</th>
												                	<th>% of Base Fare</th>
												                	<th>Curr</th>
												                	<th>Specified Amount</th>
												                	<th>PAX Type</th>
												                	<th>Fare Type</th>
													             	<th>Tkt Code</th>
												               		<th>Tkt Des</th>
												               		<th>Base Fare OW/RT</th>
												               		<th>Global</th>
												               		<th>Rtg No</th>		               		
												               		<th>Rtg No Tarno</th>
												               		<th>New FareCls</th>	
												               		<th>New OW/RT</th>	 
												               		<th>New BkgCd</th>	 
												               		<th>Travel Start</th>	   
												               		<th>Travel End</th>	   
												               		<th>Sale Start</th>	   
												               		<th>Sale End</th>	   
												               		<th>Comment</th>	  
												               		<th>Travel Complete</th>	  
												               		<th>Travel Complete Indicator</th>	
																</tr>
															</thead>
															<tbody ng-repeat="fare in vm.workPackage.discountFareSheet[vm.selectedDiscountTab].fares track by $index" >
																<tr role="row" class="datatable-row" ng-click="vm.rowTableClick($event, $index)">
																	<td>{{$index+1}}</td>
																	<td>
																		<span ng-if="vm.isFieldEditable(fare, 'discountStatus')">
																			<select class="form-control inside-table" name="status{{$parent.$index}}{{$index}}" ng-model="fare.status" id="field_status" 
																				ng-class="{'must-fill': !editForm.editFormDiscount.status{{$parent.$index}}{{$index}}.$valid && fare.action != 'Canceled'}"												         		
											           							ng-disabled="vm.isFieldDisable('discountStatus')"
											           							ng-click="$event.stopPropagation()"
																             	ng-required="vm.checkRequiredField('discountStatus')"
																             	ng-options="key as value for (key , value) in vm.status">
																			</select>																				
																		</span>
																		<span class="inside-table" ng-if="!vm.isFieldEditable(fare, 'discountStatus')">
												           					{{fare.status}}
												           				</span>
																	</td>
																	<td>
																		<span ng-if="vm.isFieldEditable(fare, 'discountTariffCode')">
																			<ui-select ng-model="fare.tarcd" theme="select2" class="form-control"
																			 	ng-click="$event.stopPropagation()"
																				name="tarcd{{$parent.$index}}{{$index}}"
																				ng-required="vm.checkRequiredField('discountTariffCode') && fare.action != 'Canceled'"  
																				ng-disabled="vm.isFieldDisable('discountTariffCode')"
																				ng-class="{'must-fill': editForm.editFormDiscount.tarcd{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}">
																				<ui-select-match placeholder="TarCd">{{$select.selected.tarCd == null ? $select.selected.value.tarCd : $select.selected.tarCd}}</ui-select-match>
																			 	<ui-select-choices style="min-width:300px" repeat="value.value as (key, value) in vm.tariffNumber | filter: { value: { tarCd: $select.search }}">
																		      		<div ng-bind-html="value.value.tarCd | highlight: $select.search"></div>
																			      	<small>
																			        	TarNo : {{value.value.tarNo}}
																			        	TarCd : {{value.value.tarCd}}
																			        	Global : {{value.value.global}}
																			      	</small>
																		    	</ui-select-choices>
																			</ui-select>
																		</span>
																		<span class="inside-table" ng-if="!vm.isFieldEditable(fare, 'discountTariffCode')">
												           					{{fare.tarcd}}
												           				</span>
																	</td>																
																	<td>
																		<span ng-if="vm.isFieldEditable(fare, 'discountLoc1Type')">
												                			<select class="form-control" 
																	             name="discountLoc1Type{{$parent.$index}}{{$index}}"
																	             ng-click="$event.stopPropagation()"
																	             ng-required="vm.checkRequiredField('discountLoc1Type')"
																	             ng-class="{'must-fill': !editForm.editFormDiscount.discountLoc1Type{{$parent.$index}}{{$index}}.$valid && fare.action != 'Canceled'}"																			            
																	             ng-model="fare.loc1Type" id="field_discountLoc1Type"
																	             ng-disabled="vm.isFieldDisable('discountLoc1Type')"
																	             ng-options="key as value for (key , value) in vm.locationType"></select>
											                			</span>
											                			<span ng-if="!vm.isFieldEditable(fare, 'discountLoc1Type')">
											                				{{fare.loc1Type}}
											                			</span>
																	</td>
																	<td>
																		<span ng-if="vm.isFieldEditable(fare, 'discountLoc1')">
												                			<input type="text" class="form-control" name="discountLoc1{{$parent.$index}}{{$index}}" id="field_origin" 
												                				ng-disabled="vm.isFieldDisable('discountLoc1')"
												                				ng-click="$event.stopPropagation()"
												                				ng-required="vm.checkRequiredField('discountLoc1') && fare.action != 'Canceled'"  
												                				ng-class="{'must-fill': !editForm.editFormDiscount.discountLoc1{{$parent.$index}}{{$index}}.$valid && fare.action != 'Canceled'}"		
													                    		ng-model="fare.loc1"/>
											                			</span>
											                			<span ng-if="!vm.isFieldEditable(fare, 'discountLoc1')">
											                				{{fare.loc1}}
											                			</span>
																	</td>
																	<td>
																		<span ng-if="vm.isFieldEditable(fare, 'discountLoc2Type')">
												                			<select class="form-control" 
																	             name="discountLoc2Type{{$parent.$index}}{{$index}}"
																	             ng-required="vm.checkRequiredField('discountLoc1Type')"
																	             ng-class="{'must-fill': !editForm.editFormDiscount.discountLoc2Type{{$parent.$index}}{{$index}}.$valid && fare.action != 'Canceled'}"																			            
																	             ng-model="fare.loc2Type" id="field_discountLoc2Type"
																	             ng-disabled="vm.isFieldDisable('discountLoc2Type')"
																	             ng-click="$event.stopPropagation()"
																	             ng-options="key as value for (key , value) in vm.locationType"></select>
											                			</span>
											                			<span ng-if="!vm.isFieldEditable(fare, 'discountLoc2Type')">
											                				{{fare.loc2Type}}
											                			</span>
																	</td>
																	<td>
																		<span ng-if="vm.isFieldEditable(fare, 'discountLoc2')">
												                			<input type="text" class="form-control" name="discountLoc2{{$parent.$index}}{{$index}}" id="field_origin" 
												                				ng-disabled="vm.isFieldDisable('discountLoc2')"
												                				ng-click="$event.stopPropagation()"
												                				ng-required="vm.checkRequiredField('discountLoc2') && fare.action != 'Canceled'"  
												                				ng-class="{'must-fill': !editForm.editFormDiscount.discountLoc2{{$parent.$index}}{{$index}}.$valid && fare.action != 'Canceled'}"		
													                    		ng-model="fare.loc2"/>
											                			</span>
											                			<span ng-if="!vm.isFieldEditable(fare, 'discountLoc2')">
											                				{{fare.loc2}}
											                			</span>
																	</td>
																	<td>
																		<span ng-if="vm.isFieldEditable(fare, 'discountBaseFareBasis')">
												                			<input type="text" class="form-control" name="discountBaseFareBasis{{$parent.$index}}{{$index}}" id="field_origin" 
												                				ng-disabled="vm.isFieldDisable('discountBaseFareBasis')"
												                				ng-click="$event.stopPropagation()"
												                				ng-required="vm.checkRequiredField('discountBaseFareBasis') && fare.action != 'Canceled'"  
												                				ng-class="{'must-fill': !editForm.editFormDiscount.discountBaseFareBasis{{$parent.$index}}{{$index}}.$valid && fare.action != 'Canceled'}"		
													                    		ng-model="fare.baseFareBasis"/>
											                			</span>
											                			<span ng-if="!vm.isFieldEditable(fare, 'discountBaseFareBasis')">
											                				{{fare.baseFareBasis}}
											                			</span>
																	</td>
																	<td>
																		<span ng-if="vm.isFieldEditable(fare, 'discountBaseRuleno')">
											                				<input type="text" class="form-control" name="discountBaseRuleno{{$parent.$index}}{{$index}}" id="field_origin" 
												                				ng-disabled="vm.isFieldDisable('discountBaseRuleno')"
												                				ng-click="$event.stopPropagation()"
												                				ng-required="vm.checkRequiredField('discountBaseRuleno') && fare.action != 'Canceled'"  
												                				ng-class="{'must-fill': !editForm.editFormDiscount.discountBaseRuleno{{$parent.$index}}{{$index}}.$valid && fare.action != 'Canceled'}"		
													                    		ng-model="fare.baseRuleNo"/>
											                			</span>
											                			<span ng-if="!vm.isFieldEditable(fare, 'discountBaseRuleno')">
											                				{{fare.baseRuleNo}}
											                			</span>
																	</td>
																	<td>
																		<span ng-if="vm.isFieldEditable(fare, 'discountBaseTariffCode')">
											                				<input type="text" class="form-control" name="discountBaseTariffCode{{$parent.$index}}{{$index}}" id="field_farebasis"
											                					ng-disabled="vm.isFieldDisable('discountBaseTariffCode')"
											                				 	ng-click="$event.stopPropagation()"
											                					ng-required="vm.checkRequiredField('discountBaseTariffCode') && fare.action != 'Canceled'" 
											                					ng-class="{'must-fill': editForm.editFormDiscount.discountBaseTariffCode{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"	
												                    			ng-model="fare.tarcd"/>												                			
											                			</span>
											                			<span ng-if="!vm.isFieldEditable(fare, 'discountBaseTariffCode')">
											                			{{fare.tarcd}}
											                			</span>
																	</td>	
																	<td>
																		<span ng-if="vm.isFieldEditable(fare, 'discountCalcType')">
											                				<select class="form-control" 
																             name="discountCalcType{{$parent.$index}}{{$index}}"
																             ng-required="vm.checkRequiredField('discountCalcType')"
																             ng-class="{'must-fill': !editForm.editFormDiscount.discountCalcType{{$parent.$index}}{{$index}}.$valid && fare.action != 'Canceled'}"																			            
																             ng-model="fare.calcType" id="discountCalcType"
																             ng-click="$event.stopPropagation()"
																             ng-disabled="vm.isFieldDisable('discountCalcType')"
																             ng-options="key as value for (key , value) in vm.calculationType"></select>
											                			</span>
											                			<span ng-if="!vm.isFieldEditable(fare, 'discountCalcType')">
											                				{{fare.calcType}}
											                			</span>
																	</td>
																	<td>
												           				<span ng-if="vm.isFieldEditable(fare, 'discountPercentageOfBaseFare')">
											                				<input type="number" class="form-control" name="discountPercentageOfBaseFare{{$parent.$index}}{{$index}}"
											                					ng-disabled="vm.isFieldDisable('discountPercentageOfBaseFare')"
											                				 	ng-click="$event.stopPropagation()"
											                					ng-required="vm.checkRequiredField('discountPercentageOfBaseFare') && fare.action != 'Canceled'" 
											                					ng-class="{'must-fill': editForm.editFormDiscount.discountPercentageOfBaseFare{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"	
												                    			ng-model="fare.percentBaseFare"/>												                			
											                			</span>
											                			<span ng-if="!vm.isFieldEditable(fare, 'discountPercentageOfBaseFare')">
											                				{{fare.percentBaseFare}}
											                			</span>
												           			</td>
												           			<td>
												           				<ui-select ng-model="fare.currency" theme="select2" ng-disabled="vm.disabled" class="form-control"
																			ng-click="$event.stopPropagation()"
																			name="currency{{$parent.$index}}{{$index}}"
																			ng-required="vm.checkRequiredField('currency') && fare.action != 'Canceled'"  
																			ng-disabled="vm.isFieldDisable('currency')"
																			
																			ng-class="{'must-fill': editForm.editFormATPCO.currency{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"	
														                    	>
																			    <ui-select-match placeholder="Currency">{{$select.selected.value.currencyCode}}</ui-select-match>
																				 <ui-select-choices style="min-width:300px" repeat="value.value.currencyCode as (key, value) in vm.currencies | filter: { value: { currencyCode: $select.search }}">
																			      <div ng-bind-html="value.value.currencyCode | highlight: $select.search"></div>
																			      <small>
																			        Currency Code : {{value.value.currencyCode}}
																			        Currency Name : {{value.value.currencyName}}
																			        
																			      </small>
																			    </ui-select-choices>
																			  </ui-select>
											                			<span ng-if="!vm.isFieldEditable(fare, 'currency')">
											                				{{fare.currency}}
											                			</span>
												           			</td>
											               			<td>
											               				
											               			</td>
											               			<td>
											               				
											               			</td>
											               			<td>
											               				
											               			</td>
											               			<td>
												               			
											               			</td>
											               			<td>
											               				
											               			</td>
											               			<td>
												               			
												               		</td> 
											               			<td>
											               					
											               			</td>
											               			<td>
											               				
											               			</td>
											               			<td>
											               				
											               			</td>
											               			<td>
											               					
											               			</td>
											               			<td>
											               				
											               			</td>
											               			<td>
											               				
											               			</td>
											               			<td>
											               				
											               			</td>
											               			<td>
											               				
											               			</td>
																</tr>
																<tr class="datatable-action{{$index}}" ng-show="vm.faresActionButton[$index]">
																	<td colspan="18" class="">
																		<div class="btn btn-app">
																			<i class="fa fa-level-up"></i>Move Up
																		</div>
																		<div class="btn btn-app">
																			<i class="fa fa-level-down"></i>Move Down
																		</div>	
																		<div class="btn btn-app">
																			<i class="fa fa-stack-exchange"></i>Derived Fares
																		</div>
																	</td>
																</tr>
															</tbody>
														</table>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>	
						</ng-form>
						
						<ng-form name="editFormMarket" role="form" novalidate ng-if="vm.workPackage.targetDistribution == 'Market' && vm.workPackage.type == 'REGULAR'">
							<div class="tab-wrapper">
								<ul class="clearfix nav-responsive nav nav-tabs">
								    <li ng-if="vm.workPackage.marketFares" ng-class="{active:vm.currentMarketTab[$index]}" ng-repeat="workPackageSheet in vm.workPackage.marketFareSheet track by $index"><a ng-click="vm.selectMarketTab($index);">Market Fares : {{vm.workPackage.marketFareSheet[$index].marketFaresName}}</a></li>
								    <li ng-if="vm.workPackage.marketRules" ng-class="{active:vm.currentTabMarketRules}"><a ng-click="vm.selectOtherTab('marketRules')">Market Rules</a></li>
								    <li ng-if="vm.workPackage.attachment" ng-class="{active:vm.currentTabAttachment}"><a ng-click="vm.selectOtherTab('attachment')">Attachment</a></li>
								</ul>
								<div class="tab-content">
									<div class="tab-pane" ng-class="{active:vm.currentMarketTab[$index]}" ng-repeat="workPackageSheet in vm.workPackage.marketFareSheet track by $index">
										<div class="pb1 mb1 bbgrey">
											<div class="clearfix">
												<div class="pull-left w50 two-column">
													<div class="form-group">
														<label>Description</label>
														<input type="text" name="description{{$index}}" class="form-control"
														ng-class="{'must-fill': editForm.editFormATPCO.description{{$index}}.$error.required && fare.action != 'Canceled'}"
										         		ng-model="workPackageSheet.specifiedFaresName" 
										         		ng-required="vm.checkRequiredField('description')"  
										         		ng-disabled="vm.isFieldDisable('description')">
													</div>
												</div>
												<div class="pull-left w50 two-column">
													<div class="form-group">
														<label>Approval Reference</label>
														<input type="text" name="approvalReference{{$index}}" class="form-control" 
														ng-class="{'must-fill': editForm.editFormATPCO.approvalReference{{$index}}.$error.required && fare.action != 'Canceled'}"
											            ng-model="workPackageSheet.approvalReference"
														ng-disabled="vm.isFieldDisable('approvalReference')"
														ng-required="vm.checkRequiredField('approvalReference')">
													</div>
												</div>
											</div>											
											<div class="clearfix">
												<div class="pull-left w50 two-column">
													<div class="form-group">
														<label>Fare Type</label>
														
														<select 
									      				class="form-control" 
									      				name="fareType{{$index}}"
									      				ng-model="workPackageSheet.fareType" 
									      				ng-class="{'must-fill': !editForm.editFormATPCO.fareType{{$index}}.$valid && fare.action != 'Canceled'}"
									      				ng-options="key as value for (key , value) in vm.fareType"
									      				ng-required="vm.checkRequiredField('fareType')"
									      				ng-disabled="vm.isFieldDisable('fareType')"></select>										      				
													</div>
												</div>
												<div class="pull-left w50 two-column">
													<div class="form-group">
														<label>Version</label>
														<select class="form-control">
															<option>Select Version</option>
															<option>Current</option>
														</select>
													</div>
												</div>
											</div>
										</div>																						
									
										<div class="table-wrapper">
											<div class="datatable-wrapper form-inline">
												<div class="clearfix">
													<div class="pull-left">
														<div class="clearfix">
															<div class="pull-right datatable-button">
																<div class="button-group dropdown">
																	<button class="btn btn-default small btn-secondary">Edit <i class="fa fa-caret-down"></i></button>
																	<ul class="dropdown-menu" role="menu">
																	    <li>
																	    	<a href="#">Clear Selection</a>
																	    </li>
																	    <li>
																	    	<a href="#">Fill Down</a>
																	    </li>
																	    <li>
																	    	<a href="#">Search/Replace</a>
																	    </li>
																	    <li>
																	    	<a ng-click="vm.addMarketFares()">Add Rows</a>
																	    </li>
																	    <li>
																	    	<a href="#">Delete Selected Rows</a>
																	    </li>
																	    <li>
																	    	<a href="#">Duplicate Selected Rows</a>
																	    </li>
																	    <li>
																	    	<a href="#">Copy Selected Rows</a>
																	    </li>
																	    <li>
																	    	<a href="#">Paste</a>
																	    </li>
																	    <li>
																	    	<a href="#">Paste As Cancel</a>
																	    </li>
																	</ul>
																</div>													
																<button class="btn btn-default small btn-secondary">Import</button>
																<button class="btn btn-default small btn-secondary">Export</button>
																<button class="btn btn-default small btn-secondary">Publish</button>
																<button class="btn btn-default small btn-secondary" data-toggle="modal" data-target="#modalAgent">Agents</button>
																<button class="btn btn-default small btn-secondary" data-toggle="modal" data-target="#modalRatesheet">Rate Sheet</button>
															</div>
														</div>	
													</div>
												</div>
												<div class="table-responsive">
													<table class="table table-stripped table-bordered datatable">
														<thead>
															<tr>
										                		<th>No</th>
										                		<th>Status</th>
											                	<th>Carrier</th>		                	
											                	<th>Origin</th>
											                	<th>Dest</th>
											                	<th>Fare Cls</th>
											                	<th>Bkg Cls</th>
											                	<th>SSN</th>
											                	<th>Cabin</th>
											                	<th>OW/RT</th>
											                	<th>Rule Id</th>
											                	<th>Curr</th>
											                	<th>Base Amt</th>
											                	<!-- <th>Prev Base Amt</th>
											                	<th>Prev Base Amt Diff</th>
											                	<th>% Prev Base Amt Diff</th> -->
												                <th>Travel Start</th>
											               		<th>Travel End</th>		               		
											               		<th>Sale Start</th>
											               		<th>Sale End</th>	
											               		<th>Comment</th>	               		
											               		<th>Travel Complete</th>	               		
											               		<th>Travel Complete Indicator</th>	               		
											               		<th>RateSheet Comment</th>	        		
											                </tr>
														</thead>
														<tbody ng-repeat="fare in vm.workPackage.marketFareSheet[vm.selectedMarketTab].fares track by $index">
															<tr>
																<td>{{$index+1}}</td>
																<td>
																	<span ng-if="vm.isFieldEditable(fare, 'status')">
																		<select class="form-control inside-table" name="status{{$parent.$index}}{{$index}}" ng-model="fare.status" id="field_status" 
																			ng-class="{'must-fill': !editForm.editFormATPCO.status{{$parent.$index}}{{$index}}.$valid && fare.action != 'Canceled'}"												         		
										           							ng-disabled="vm.isFieldDisable('status')"
															             	ng-required="vm.checkRequiredField('status')"
															             	ng-options="key as value for (key , value) in vm.status">
																		</select>																				
																	</span>
																	<span class="inside-table" ng-if="!vm.isFieldEditable(fare, 'status')">
											           					{{fare.status}}
											           				</span>
																</td>
																<td>
																	<span ng-if="vm.isFieldEditable(fare, 'carrier')">
											           					<input type="text" class="form-control" name="carrier{{$parent.$index}}{{$index}}" id="field_carrier"
												                    		ng-model="fare.carrier"
												                    		ng-disabled="vm.isFieldDisable('carrier')"
												                    		ng-class="{'must-fill': ditForm.editFormATPCO.carrier{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"												         		
																            ng-required="vm.checkRequiredField('carrier')"/>
											           				</span>
											           				<span ng-if="!vm.isFieldEditable(fare, 'carrier')">
											           					{{fare.carrier}}
											           				</span>
																</td>
																<td>
																	<ui-select ng-model="fare.origin" theme="select2" ng-disabled="vm.disabled" class="form-control"
																		 ng-click="$event.stopPropagation()"
																		name="origin{{$parent.$index}}{{$index}}"
																		ng-required="vm.checkRequiredField('origin') && fare.action != 'Canceled'"  
																		ng-disabled="vm.isFieldDisable('origin')"
																		
																		ng-class="{'must-fill': editForm.editFormATPCO.origin{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"	
												                    	>
																	    <ui-select-match placeholder="Origin">{{$select.selected.value.cityCode}}</ui-select-match>
																		 <ui-select-choices style="min-width:300px" repeat="value.value.cityCode as (key, value) in vm.cities | filter: { value: { cityCode: $select.search }}">
																	      <div ng-bind-html="value.value.cityCode | highlight: $select.search"></div>
																	      <small>
																	        City Code : {{value.value.cityCode}}
																	        City Name : {{value.value.cityName}}
																	        Country Code : {{value.value.countryCode}}
																	        Country Name : {{value.value.countryName}}
																	        
																	      </small>
																	    </ui-select-choices>
																	  </ui-select>
																</td>
																<td>
																	<ui-select ng-model="fare.destination" theme="select2" ng-disabled="vm.disabled" class="form-control"
																		 ng-click="$event.stopPropagation()"
																		name="destination{{$parent.$index}}{{$index}}"
																		ng-required="vm.checkRequiredField('destination') && fare.action != 'Canceled'"  
																		ng-disabled="vm.isFieldDisable('destination')"
																		
																		ng-class="{'must-fill': editForm.editFormATPCO.destination{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"	
													                    	>
																	    <ui-select-match placeholder="Destination">{{$select.selected.value.cityCode}}</ui-select-match>
																		 <ui-select-choices style="min-width:300px" repeat="value.value.cityCode as (key, value) in vm.cities | filter: { value: { cityCode: $select.search }}">
																	      <div ng-bind-html="value.value.cityCode | highlight: $select.search"></div>
																	      <small>
																	        City Code : {{value.value.cityCode}}
																	        City Name : {{value.value.cityName}}
																	        Country Code : {{value.value.countryCode}}
																	        Country Name : {{value.value.countryName}}
																	        
																	      </small>
																	    </ui-select-choices>
																	  </ui-select>
																</td>
																<td>
																	<span ng-if="vm.isFieldEditable(fare, 'farebasis')">
										                				<input type="text" class="form-control" name="farebasis{{$parent.$index}}{{$index}}" id="field_farebasis"
										                				ng-disabled="vm.isFieldDisable('farebasis')"
										                				 ng-click="$event.stopPropagation()"
										                				ng-required="vm.checkRequiredField('farebasis') && fare.action != 'Canceled'" 
										                				ng-class="{'must-fill': editForm.editFormATPCO.farebasis{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"	
											                    		ng-model="fare.fareBasis"/>												                			
										                			</span>
										                			<span ng-if="!vm.isFieldEditable(fare, 'farebasis')">
										                			{{fare.fareBasis}}
										                			</span>
																</td>
																<td>
																	<input type="text" class="form-control" name="bookingClass{{$parent.$index}}{{$index}}" id="field_bookingClass"
										                				ng-disabled="vm.isFieldDisable('bookingClass')"
										                				ng-required="vm.checkRequiredField('bookingClass') && fare.action != 'Canceled'" 
										                				ng-class="{'must-fill': editForm.editFormATPCO.bookingClass{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"	
											                    		ng-model="fare.bookingClass"/>												                			
										                			</span>
										                			<span ng-if="!vm.isFieldEditable(fare, 'bookingClass')">
										                				{{fare.bookingClass}}
										                			</span>
																</td>
																<td></td>
																<td>
																	<span ng-if="vm.isFieldEditable(fare, 'cabin')">									           						
											           					<select class="form-control" 
															             name="cabin{{$parent.$index}}{{$index}}"
															             ng-required="vm.checkRequiredField('cabin')"
															             ng-click="$event.stopPropagation()"
															             ng-class="{'must-fill': !editForm.editFormATPCO.cabin{{$parent.$index}}{{$index}}.$valid && fare.action != 'Canceled'}"	
															             ng-model="fare.cabin" id="field_cabin" 
															             ng-disabled="vm.isFieldDisable('cabin')"
															             ng-options="key as value for (key , value) in vm.cabin"></select>										                			
										                			</span>
										                			<span ng-if="!vm.isFieldEditable(fare, 'cabin')">
										                				{{fare.cabin}}
										                			</span>
																</td>
																<td>
																	<span ng-if="vm.isFieldEditable(fare, 'typeOfJourney')">
										                				<select class="form-control" 
															             name="typeOfJourney{{$parent.$index}}{{$index}}"
															             ng-required="vm.checkRequiredField('typeOfJourney')"
															             ng-class="{'must-fill': !editForm.editFormATPCO.typeOfJourney{{$parent.$index}}{{$index}}.$valid && fare.action != 'Canceled'}"																			            
															             ng-model="fare.typeOfJourney" id="field_typeOfJourney"
															             ng-disabled="vm.isFieldDisable('typeOfJourney')"
															             ng-options="key as value for (key , value) in vm.typeOfJourney"></select>
										                			</span>
										                			<span ng-if="!vm.isFieldEditable(fare, 'typeOfJourney')">
										                				<span ng-if="fare.typeOfJourney == 'One Way'">1</span>
												           				<span ng-if="fare.typeOfJourney == 'Return'">2</span>
												           				<span ng-if="fare.typeOfJourney == 'One Way Only'">3</span>
										                			</span>
																</td>
																<td>
																	<span ng-if="vm.isFieldEditable(fare, 'ruleno')">
										                				<input type="text" class="form-control" name="ruleno{{$parent.$index}}{{$index}}" id="field_bookingClass"
										                				ng-disabled="vm.isFieldDisable('ruleno')"
										                				ng-required="vm.checkRequiredField('ruleno')" 
										                				ng-class="{'must-fill': editForm.editFormATPCO.ruleno{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"																			            
															            ng-model="fare.ruleno"/>
										                			
										                			</span>
										                			<span ng-if="!vm.isFieldEditable(fare, 'ruleno')">
										                				{{fare.ruleno}}
										                			</span>
																</td>
																<td>
																	<ui-select ng-model="fare.currency" theme="select2" ng-disabled="vm.disabled" class="form-control"
																 		ng-click="$event.stopPropagation()"
																		name="currency{{$parent.$index}}{{$index}}"
																		ng-required="vm.checkRequiredField('currency') && fare.action != 'Canceled'"  
																		ng-disabled="vm.isFieldDisable('currency')"																		
																		ng-class="{'must-fill': editForm.editFormATPCO.currency{{$parent.$index}}{{$index}}.$error.required && fare.action != 'Canceled'}"	>
																    <ui-select-match placeholder="Currency">{{$select.selected.value.currencyCode}}</ui-select-match>
																	 <ui-select-choices style="min-width:300px" repeat="value.value.currencyCode as (key, value) in vm.currencies | filter: { value: { currencyCode: $select.search }}">
																      <div ng-bind-html="value.value.currencyCode | highlight: $select.search"></div>
																      <small>
																        Currency Code : {{value.value.currencyCode}}
																        Currency Name : {{value.value.currencyName}}
																        
																      </small>
																    </ui-select-choices>
																  </ui-select>
																</td>
																<td></td>
																<td></td>
																<td></td>
																<td></td>
																<td></td>
																<td></td>
																<td></td>
																<td></td>
																<td></td>
																
															</tr>
															<tr class="datatable-action{{$index}}" ng-show="vm.faresActionButton[$index]">
																<td colspan="18" class="">
																	<div class="btn btn-app">
																		<i class="fa fa-level-up"></i>Move Up
																	</div>
																	<div class="btn btn-app">
																		<i class="fa fa-level-down"></i>Move Down
																	</div>	
																	<div class="btn btn-app">
																		<i class="fa fa-stack-exchange"></i>Derived Fares
																	</div>
																</td>
															</tr>
														</tbody>
													</table>
												</div>
											</div>
										</div>	
									</div>
									
									<div class="tab-pane" ng-class="{active:vm.currentTabMarketRules}">
										<div class="action-btn-wrapper">
						       				<div class="col-md-12 text-right no-pad">
						       					<button ng-click="vm.addMarketRules()" class="btn btn-primary">Add</button>
						       				</div>
						       			</div>
						       			
						       			<label class="full-ib md-bot-mar text-center empty" ng-if="!vm.workPackage.marketRulesData || vm.workPackage.marketRulesData.length == 0">
					       					No Market Rules Available
					       				</label>
										<div ng-repeat="marketRules in vm.workPackage.marketRulesData track by $index" class="form-repeat">
					       					<button ng-click="vm.removeMarketRules(marketRules)" class="bordered delete"><span class="glyphicon glyphicon-remove"></span></button>
						       				<label class="user">admin <span class="vseparator no-mar"></span> 12JAN18 09:15:16</label>
								        	<div class="row">
								        		<div class="col-md-6">
									      			<div class="form-group row">
									      				<label class="col-md-4" >Status</label>
									      				<div class="col-md-8 no-pad select">
									      					<select class="col-md-12" name="qaStatus" ng-model="marketRules.status" id="field_qaStatus">
												                <option value="">Select Status</option>
												                <option value="PENDING" >Pending</option>
												                <option value="APPROVED">Approve</option>
												                <option value="REJECTED">Reject</option>
												            </select>	
									      				</div>
									      			</div>
									      			<div class="form-group row" ng-init="marketRules.cxr = 'GA'">
									      				<label class="col-md-4" >CXR</label>
											            <input type="text" class="col-md-8" ng-model="marketRules.cxr" disabled/>
									      			</div>
									      			<div class="form-group row">
									      				<label class="col-md-4">Market Rule Id</label>
										             	<input type="text" class="col-md-8" ng-model="marketRules.ruleid"/>
									      			</div>
									      			<div class="form-group row">
									      				<label class="col-md-4">Comment</label>
									      				<div class="col-md-8 input-group textarea">
									      					<textarea class="col-md-12" ng-model="marketRules.comment"></textarea>
									      				</div>
									      			</div>
								        		</div>
								        		<div class="col-md-6">
								        			<div class="form-group row file" ngf-drop ngf-change="vm.setFile($file, marketRules)">
											            <label class="control-label">File Attachment</label>
											            <div>
											                <div ng-if="marketRules.file" class="help-block clearfix">
											                    <a class="pull-left" ng-click="vm.openFile(marketRules.fileContentType, marketRules.file)" data-translate="entity.action.open">open</a><br>
											                    <span class="pull-left">{{marketRules.fileContentType}}, {{vm.byteSize(marketRules.file)}}</span>
											                    <button type="button" ng-click="marketRules.file=null;marketRules.fileContentType=null;"
											                            class="btn btn-default btn-xs pull-right delete grey">
											                        <span class="glyphicon glyphicon-remove"></span>
											                    </button>
											                </div>
											                <div class="action-btn-wrapper no-pad">
											                	<button type="button" ngf-select class="btn btn-primary btn-block"
												                        ngf-change="vm.setFile($file, marketRules)">
												                    Add file
												                </button>
											                </div>
											            </div>
											            <input type="hidden" class="form-control" name="file" id="field_file" ng-model="marketRules.file"/>
											            <input type="hidden" class="form-control" name="fileContentType" id="field_fileContentType" ng-model="marketRules.fileContentType"/>
											        </div>
								        		</div>
								      		</div>
										</div>
					       			</div>
									
									<div class="tab-pane" ng-class="{active:vm.currentTabAttachment}">
										<div class="action-btn-wrapper">
						     				<div class="col-md-12 text-right no-pad">
						     					<button ng-click="vm.addAttachment()" class="btn btn-primary">Add</button>
						     				</div>
						     			</div>
						     			
										<label class="full-ib md-bot-mar text-center empty" ng-if="!vm.workPackage.attachmentData || vm.workPackage.attachmentData.length == 0">
					       					No Attachment Available
					       				</label>
					       				<div ng-repeat="attachment in vm.workPackage.attachmentData track by $index" class="form-repeat">
					       					<button ng-click="vm.removeAttachment(attachment)" class="bordered delete"><span class="glyphicon glyphicon-remove"></span></button>
							       			<label class="user">admin <span class="vseparator no-mar"></span> 12JAN18 09:15:16</label>
							       			<div class="row">
								        		<div class="col-md-6">
									      			<div class="form-group row">
									      				<label class="col-md-4">Comment</label>
									      				<div class="col-md-8 input-group textarea">
									      					<textarea class="col-md-12" ng-model="attachment.comment"></textarea>
									      				</div>
									      			</div>
								        		</div>
								        		<div class="col-md-6">
								        			<div class="form-group file" ngf-drop ngf-change="vm.setFileAttachment($file, attachment)">
											            <label class="control-label">File Attachment</label>
											            <div>
											                <div ng-if="attachment.file" class="help-block clearfix">
											                    <a class="pull-left" ng-click="vm.openFile(attachment.fileContentType, attachment.file)" data-translate="entity.action.open">open</a><br>
											                    <span class="pull-left">{{attachment.fileContentType}}, {{vm.byteSize(attachment.file)}}</span>
											                    <button type="button" ng-click="attachment.file=null;attachment.fileContentType=null;"
											                            class="btn btn-default btn-xs pull-right delete grey">
											                        <span class="glyphicon glyphicon-remove"></span>
											                    </button>
											                </div>
											                <button type="button" ngf-select class="btn btn-default btn-block"
											                        ngf-change="vm.setFile($file, attachment)">
											                    Add file
											                </button>
											            </div>
											            <input type="hidden" class="form-control" name="file" id="field_file"
											                    ng-model="attachment.file"
											                    />
											            <input type="hidden" class="form-control" name="fileContentType" id="field_fileContentType"
											                    ng-model="attachment.fileContentType" />
											        </div>
								        		</div>
								      		</div>
								     	</div>
									</div>
								</div>
							</div>
						</ng-form>
					</div>
				</div>
			</div>			
		</div>
</form>
	
	<script src='content/js/modernizr-custom.js'></script>
       <script src='content/js/plugins.js'></script>
       <script src='content/js/revealer.js'></script>
       <script src='content/js/main.js'></script>
	<script>
		(function() {			
			var pages = [].slice.call(document.querySelectorAll('.page-wrapper > .page-content')),
				currentPage = 0,
				
				revealerOpts = {
					// the layers are the elements that move from the sides
					nmbLayers : 3,
					// bg color of each layer
					bgcolor : ['#111', '#fc3', '#fff'],
					// effect classname
					effect : 'anim--effect-4',
					onStart : function(direction) {
						// next page gets class page--animate-[direction]
						var nextPage = pages[currentPage === 0 ? 1 : 0];
						classie.add(nextPage, 'page--animate-' + direction);
					},
					onEnd : function(direction) {
						// remove class page--animate-[direction] from next page
						var nextPage = pages[currentPage === 0 ? 1 : 0];
						nextPage.className = 'page-content';
					}
				};
				revealer = new Revealer(revealerOpts);

			// clicking the page nav buttons

			var dataId;
			var dataDistribution;
			
			$('.js-createWorkOrder').click(function(){
				reveal('left'); 
				dataId = $(this).attr('data-id');
				$('.data-on').show();
			})

			$('.js-back').click(function(){
				reveal('left'); 
				dataId = $(this).attr('data-id');
			})

			$('.pagenav__button--right').click(function(){
				reveal('right'); 
				dataId = $(this).attr('data-id');
				dataDistribution = $(this).attr('data-distribution');
				var _href = $('#'+dataDistribution).find('.nav-tabs li:first-child a').attr('href');
				$('.tab-wrapper').hide();
				//$(".nav-tabs li").removeClass('active');
				//$('#'+dataDistribution).show().find('.nav-tabs li:first-child').addClass('active');
				$(_href).addClass('active');
				$('#sideBar-s1').removeClass('sideBar-open')
				$('.search-wrap').find('i').removeClass('shrink');
				$('.sideBar').find('.menu-list').removeClass('open');
				$('.menu-list').removeClass('sub');
				$('.sub-menu').slideUp(200);
				$('.page-content').removeClass('pushed');
			});

			// triggers the effect by calling instance.reveal(direction, callbackTime, callbackFn)
			function reveal(direction) {
				var callbackTime = 750,
					callbackFn = function() {
						classie.remove(pages[currentPage], 'page--current');
						currentPage = currentPage === 0 ? dataId : 0;
						classie.add(pages[currentPage], 'page--current');	
					};

				revealer.reveal(direction, callbackTime, callbackFn);
			}


			function changeEffect() {
				revealer.destroy();
				var revealerOpts = {
					// the layers are the elements that move from the sides
					nmbLayers : Number(this.options[this.selectedIndex].getAttribute('data-layers')),
					// bg color of each layer
					bgcolor : this.options[this.selectedIndex].getAttribute('data-colors').split(','),
					// effect classname
					effect : 'anim--' + this.value,
					onStart : function(direction) {
						// next page gets class page--animate-[direction]
						var nextPage = pages[currentPage === 0 ? dataId : 0];
						classie.add(nextPage, 'page--animate-' + direction);
					},
					onEnd : function(direction) {
						// remove class page--animate-[direction] from next page
						var nextPage = pages[currentPage === 0 ? dataId : 0];
						nextPage.className = 'page-content';
					}
				};
				
				revealer = new Revealer(revealerOpts);
			}
		})();
		</script>
